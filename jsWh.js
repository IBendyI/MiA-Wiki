// Путеводная Звезда Вакуна Избранная
// Хранитель Тайн Срао Загадочный
// Владыка Рассвета Бондрюд Одарённый
// Озен Непоколибимая

const whistleData = {
    'lyza': {
        title: 'Белый свисток Лайзы Разрушительницы',
        image: 'img/whistles/lyza.png',
        info: 'Легендарный Белый свисток, принадлежащий Лайзы Разрушительнице. Высший ранг исследователя, предположительно достигшая дна Бездны. получившиеся в результате обработки Артефакта, именуемого как «Ваша ценность» или «Камень, звучащий жизнью». Когда «Резонатору жизни» путём обработки придают форму. В свою очередь сырьём «Резонатора жизни» является человек с твёрдой решимостью пожертвовать всем ради предполагаемого пользователя свистка, в результате после своей смерти тот может превратится в «Резонатора жизни». Конкретно раньше свистокк <large>Лайзы</large> был <large><u>Дони</u></large>'
    },
    'rico': {
        title: 'Белый свисток Лорд Детей Рико',
        image: 'img/whistles/rico.png',
        info: 'Легендарный Белый свисток, принадлежащий Лорд Детей Рико. Юная, но целеустремленная исследовательница, ищущая свою мать, получившая белый свисток не имея даже синего в результате обработки Артефакта, именуемого как «Ваша ценность» или «Камень, звучащий жизнью». Когда «Резонатору жизни» путём обработки придают форму. В свою очередь сырьём «Резонатора жизни» является человек с твёрдой решимостью пожертвовать всем ради предполагаемого пользователя свистка, в результате после своей смерти тот может превратится в «Резонатора жизни». Конкретно раньше свистоком <large>Рико</large> была <large><u>Дочь Бондрюда: Прушка</u></large>'
    },
    'animal': {
        title: 'Белый cвисток Сраджо Таинственной',
        image: 'img/whistles/animal.png',
        info: 'Свисток Сраджо Таинственной, предположительно, сделала немало удивительных открытий в Бездне и обнаружила Реликвии, изменившие мир снаружи. Белый свисток получен в результате обработки Артефакта, именуемого как «Ваша ценность» или «Камень, звучащий жизнью». Когда «Резонатору жизни» путём обработки придают форму. В свою очередь сырьём «Резонатора жизни» является человек с твёрдой решимостью пожертвовать всем ради предполагаемого пользователя свистка, в результате после своей смерти тот может превратится в «Резонатора жизни».'
    },
    'ozen': {
        title: 'Белый свисток Озен Непоколебимой',
        image: 'img/whistles/ozen.png',
        info: 'Белый свисток Озен Непоколебимой. Легендарная исследовательница, обучавшая Рико и обладающая огромной силой. Белый свисток получен в результате обработки Артефакта, именуемого как «Ваша ценность» или «Камень, звучащий жизнью». Когда «Резонатору жизни» путём обработки придают форму. В свою очередь сырьём «Резонатора жизни» является человек с твёрдой решимостью пожертвовать всем ради предполагаемого пользователя свистка, в результате после своей смерти тот может превратится в «Резонатора жизни».'
    },
    'bondrewd': {
        title: 'Белый свисток Лорда Рассвета Бондрюда',
        image: 'img/whistles/bondrewd.png',
        info: 'Белый свисток Бондрюда Вестника Рассвета. Гениальный, но безумный ученый, проводящий ужасные эксперименты над детьми. Белый свисток получен в результате обработки Артефакта, именуемого как «Ваша ценность» или «Камень, звучащий жизнью». Когда «Резонатору жизни» путём обработки придают форму. В свою очередь сырьём «Резонатора жизни» является человек с твёрдой решимостью пожертвовать всем ради предполагаемого пользователя свистка, в результате после своей смерти тот может превратится в «Резонатора жизни». Конкретно раньше свистоком <large>Бондрюда</large> был сам <large><u>Бондрюд</u></large>, в результате того, что тот смог скопировать своё сознание и перенести его в тело в одну из своих "Молящихся Рук"'
    },
    'sea': {
        title: 'Белый свисток «Ведущего Владыки», Вакуна Избранный',
        image: 'img/whistles/sea.png',
        info: 'Белый свисток Ведущего Владыки Вакуны. На данный момент в произведении он ещё не повялялся, но как и остальные свисток он получил в результате обработки Артефакта, именуемого как «Ваша ценность» или «Камень, звучащий жизнью». Когда «Резонатору жизни» путём обработки придают форму. В свою очередь сырьём «Резонатора жизни» является человек с твёрдой решимостью пожертвовать всем ради предполагаемого пользователя свистка, в результате после своей смерти тот может превратится в «Резонатора жизни».'
    },
    'bell': {
        title: 'Бубенчик',
        image: 'img/whistles/bell.png',
        info: 'Присваивается тому, кто только учится быть Искателем, но ещё ни разу не погружался в Бездну.'
    },
    'red': {
        title: 'Красный свисток',
        image: 'img/whistles/red.png',
        info: 'После первого спуска в Бездну, который происходит в сопровождении старших, ученик получает Красный свисток и официальный статус Искателя. Красные свистки — это новички(в основном от 10 до 14 лет), которые обладают основными необходимыми знаниями о Бездне и могут самостоятельно спускаться на 1-й слой.'
    },
    'blue': {
        title: 'Синий свисток',
        image: 'img/whistles/blue.png',
        info: 'Искатели-знатоки. Они опытные дельцы, сумевшие обрести репутацию. Им разрешено спускаться на Второй слой. Как правило, при соответствующей подготовке, достигают ранга Синего свистка в возрасте 15-ти лет, хотя есть исключения, к примеру Марурук.'
    },
    'moon': {
        title: 'Лунный свисток',
        image: 'img/whistles/moon.png',
        info: 'Искатели-наставники. Имеют право спускаться на 3-й и 4-й слои Бездны. Ранга обычно достигают примерно в 22 года. Носители Лунного свистка могут жить за счёт экспедиций, в то время как более низкие ранги часто работают неполный рабочий день, в остальное время устраивая туристические экскурсии в Орфе и его окрестностях .'
    },
    'black': {
        title: 'Чёрный свисток',
        image: 'img/whistles/black.png',
        info: 'Искатели-профессионалы. Носители Чёрного свистка могут спускаться на 5-й слой Бездны, перегрузка от подъёма с которого может вызвать безумие. Иногда они работают под руководством Белых свистков в качестве подчиненных и помогают тем в их похождениях.'
    }
};

// Функция открытия модального окна
function openWhistleModal(whistleKey) {
    const data = whistleData[whistleKey];
    if (!data) return;
    
    document.getElementById('modalTitle').textContent = data.title;
    document.getElementById('modalImage').style.backgroundImage = `url(${data.image})`;
    document.getElementById('modalInfo').innerHTML = `<p>${data.info}</p>`;
    
    document.getElementById('whistleModal').style.display = 'block';
}

// Функция закрытия модального окна
function closeModal() {
    document.getElementById('whistleModal').style.display = 'none';
}

// Добавляем обработчики событий после загрузки DOM
document.addEventListener('DOMContentLoaded', function() {
    // Закрытие модального окна
    document.querySelector('.close').addEventListener('click', closeModal);
    
    // Закрытие при клике вне окна
    window.addEventListener('click', function(event) {
        const modal = document.getElementById('whistleModal');
        if (event.target === modal) {
            closeModal();
        }
    });
    
    // Добавляем обработчики для всех свистков
    const whistles = document.querySelectorAll('.whistle');
    whistles.forEach(whistle => {
        // Определяем тип свистка по background-image
        const bgImage = whistle.style.backgroundImage;
        let whistleKey = '';
        
        if (bgImage.includes('lyza')) whistleKey = 'lyza';
        else if (bgImage.includes('rico')) whistleKey = 'rico';
        else if (bgImage.includes('animal')) whistleKey = 'animal';
        else if (bgImage.includes('ozen')) whistleKey = 'ozen';
        else if (bgImage.includes('bondrewd')) whistleKey = 'bondrewd';
        else if (bgImage.includes('sea')) whistleKey = 'sea';
        else if (bgImage.includes('bell')) whistleKey = 'bell';
        else if (bgImage.includes('red')) whistleKey = 'red';
        else if (bgImage.includes('blue')) whistleKey = 'blue';
        else if (bgImage.includes('moon')) whistleKey = 'moon';
        else if (bgImage.includes('black')) whistleKey = 'black';
        
        if (whistleKey) {
            whistle.addEventListener('click', () => openWhistleModal(whistleKey));
        }
    });
});