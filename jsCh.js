// Данные персонажей
const charactersData = {
    riko: {
        name: "Рико",
        japanese: "リコ",
        seiyuu: "Мию Томита",
        whistle: "Белый Свисток",
        age: "12 лет",
        status: "Главная героиня",
        image: "img/characters/riko-detail.jpg",
        bio: `12-летняя девочка, сирота и дочь "Белого" свистка Лайзы-Уничтожительницы, легендарной покорительницы Бездны, исчезнувшей 10 лет назад. Рико, несмотря на свою внешность и беззащитность, очень любознательна, пренебрегает безопасностью и постоянно нарушая правила приюта, терпит наказания. Однажды узнав, что её мать может быть жива, она решила сама спуститься в Бездну вместе с роботом Регом. Во время путешествия множество раз попадала в смертельно опасные ситуации, но её спасал Рег. Родилась она мертворождённой во время путешествия Лизы в Бездне, однако была оживлена благодаря силе одного из найденных артефактов. Спустившись на четвёртый уровень Бездны, оказалась смертельно ранена и чуть не потеряла руку. После гибели Прушки стала «Белым» Свистком.`,
        abilities: [
            "Любознательность и решимость",
            "Наследница Лайзы-Уничтожительницы",
            "Обладательница белого свистка Прушки",
            "Высокая выживаемость в экстремальных условиях"
        ],
        trivia: [
            "Родилась мертворождённой во время путешествия Лизы в Бездне",
            "Была оживлена благодаря силе артефакта",
            "Стала Белым Свистком после гибели Прушки",
            "Единственная, кто смог получить белый свисток таким образом"
        ]
    },

    reg: {
        name: "Рег",
        japanese: "レグ",
        seiyuu: "Мария Исэ",
        whistle: "Артефакт",
        age: "Неизвестно",
        status: "Главный герой",
        image: "img/characters/reg-detail.jpg",
        bio: `Главный герой и робот, имеющий облик мальчика. Он — уникальный и, вероятно, самый ценный артефакт Бездны, хотя кроме Лайзы и её друзей никто о природе Рега и не догадывался. Потерял память о прошлом, и его оставшиеся воспоминания связаны с Лайзой. Несмотря на свою природу, сверхпрочность и колоссальную силу, внешне похож на ребёнка и обладает человеческими биологическими особенностями; имеет кровь, гениталии, может питаться как человек, плакать, и, самое главное, обладает вполне человеческими эмоциями, желаниями и страхами. Так, он быстро привязывается к Рико и боится её потерять. Не восприимчив к Проклятью Бездны.`,
        abilities: [
            "Механические руки, растягивающиеся до 40 метров",
            "Лазерные пушки (требуют 2 часа перезарядки)",
            "Не восприимчив к Проклятью Бездны",
            "Сверхпрочность и колоссальная сила",
            "Водолазные способности"
        ],
        trivia: [
            "Имеет человеческие биологические особенности",
            "Может питаться, плакать и испытывать эмоции",
            "Назван в честь собаки Лайзы",
            "Потерял память при спасении Рико от Алого аспида"
        ]
    },

    nanachi: {
        name: "Наначи & Митти",
        japanese: "ナナチ & ミーティ",
        seiyuu: "Сиори Идзава & Эри Китамура",
        whistle: "Пустая",
        age: "Неизвестно",
        status: "Бывшие жертвы экспериментов",
        image: "img/characters/nanachi-detail.jpg",
        bio: `Последние несколько лет Нанати обитала в четвёртом уровне Бездны вместе с Митти, обезображенной проклятьем бездны. Нанати — нелюдь, или «пустая», она представляет собой антропоморфное существо, похожее на кролика и человека, по причине того, что вместе со своей подругой Митти стала жертвой эксперимента Бондрюда, который спустил девочек на шестой уровень Бездны и затем снова поднял для наблюдения эффекта Проклятья и испытания машины, которая должна была уменьшить эффект Проклятья одного человека за счёт другого. Так Нанати приобрела свой новый облик - ей, благодаря любви Митти досталось "благословение" а последняя, как принимающая больший эффект Проклятья была обезображена до неузнаваемости и потеряла разум.`,
        abilities: [
            "Медицинские знания и навыки лечения",
            "Устойчивость к проклятью Бездны",
            "Опыт выживания на 4-м уровне",
            "Знание экспериментов Бондрюда"
        ],
        trivia: [
            "Нанати сбежала из лаборатории Бондрюда с Митти",
            "Годы пыталась убить Митти, чтобы прекратить её страдания",
            "Помогла вылечить Рико на 4-м уровне",
            "Попросила Рега убить Митти своим лазером"
        ]
    },

    prushka: {
        name: "Прушка",
        japanese: "プルシュカ",
        seiyuu: "Инори Минасэ",
        whistle: "Белый Свисток",
        age: "12",
        status: "Приёмная дочь Бондрюда",
        image: "img/characters/prushka-detail.jpg",
        bio: `Девочка-альбинос с красными глазами и белыми волосами. Обитательница древнего храма пятого уровня Бездны. Родилась в Бездне и никогда не видела Поверхность. Приёмная дочь Бондрюда, которую тот нашёл сильно истощённой из-за последствий Проклятья Бездны. Любит приёмного отца и не подозревает, что он ставил жуткие эксперименты над детьми, также дружится с главными героями. Также она любит свою зверушку Мэйню, которая до встречи с героями была её единственным другом. Прушка дает героям сбежать и узнаёт о части экспериментов Бондрюда.`,
        abilities: [
            "Знание устройства Идофронта",
            "Умение обращаться с картриджами",
            "Навыки выживания на 5-м уровне"
        ],
        trivia: [
            "Трагически погибла, превращённая Бондрюдом в картридж",
            "Её останки превратились в белый свисток для Рико",
            "Её питомец Мэйня перешёл к Рико",
            "Стала ключевой фигурой в превращении Рико в Белого Свистка"
        ]
    },

    ozen: {
        name: "Одзэн",
        japanese: "オーゼン",
        seiyuu: "Саяка Охара",
        whistle: "Белый Свисток",
        age: "Более 50 лет",
        status: "Легендарный Белый Свисток",
        image: "img/characters/ozen-detail.jpg",
        bio: `«Белый» Свисток, также известная, как «Одзэн Недвижимая». Крайне опытна и сильна, но одновременно антисоциальна и скорее попадает под описание антигероя/злодея. Предпочитала обществу путешествия в Бездну. Несмотря на внешность, ей уже давно за полвека. Путешествуя на глубоких уровнях, откуда мало кто возвращался, Одзэн частично утеряла свою человечность и скрывает изменения под причёской и закрытой одеждой. Была наставницей Лайзы и ненавидит Рико, так как ради спасения девочки Лайза оставила ценные артефакты, что не понравилось Одзэн.`,
        abilities: [
            "Невероятная физическая сила",
            "Годы опыта исследований Бездны",
            "Знание механизмов проклятья",
            "Боевые навыки высшего уровня"
        ],
        trivia: [
            "Известна как «Одзэн Недвижимая»",
            "Частично утратила человечность из-за глубинных путешествий",
            "Обучила Рико и Рега выживанию во 2-м слое",
            "Сдерживала обещание, данное Лайзе"
        ]
    },

    marulk: {
        name: "Марулк",
        japanese: "マルルク",
        seiyuu: "Аки Тоёсаки",
        whistle: "Синий Свисток",
        age: "12 лет",
        status: "Помощник Одзэн",
        image: "img/characters/marulk-detail.jfif",
        bio: `Помощник Одзэн, «Голубой» Свисток. Ровесник Рико, обладает голубым свистком, чтобы легально жить вместе с Одзэн на втором уровне. Истинная причина заключается в том, что Марулк не переносит солнечный свет, поэтому ему предложили постоянную стажировку у Одзэн. Одевается как девочка и притворяется ей. Из-за того, что на втором уровне не бывает детей, «Красных» Свистков, ему очень одиноко и он обрадовался прибытию Рико и Рега.`,
        abilities: [
            "Умение обслуживать базу Одзэн",
            "Знание второго уровня Бездны",
            "Навыки скрытности и маскировки"
        ],
        trivia: [
            "Не переносит солнечный свет",
            "Одевается как девочка для маскировки",
            "Был очень одинок до прибытия Рико и Рега",
            "Единственный постоянный обитатель 2-го уровня кроме Одзэн"
        ]
    },

    lyza: {
        name: "Лайза",
        japanese: "ライザ",
        seiyuu: "Маая Сакамото",
        whistle: "Белый Свисток",
        age: "Неизвестно (пропала 10 лет назад)",
        status: "Легендарная исследовательница",
        image: "img/characters/lyza-detail.png",
        bio: `Мать Рико, одна из немногих, кто сумел получить ранг «Белого» Свистка и стать легендой – «Лайзой-Уничтожительницей». Пропала 10 лет назад, её судьба за эти прошедшие годы остаётся тайной. Однако известно, что 13 лет назад она вместе с Одзэн и другими Свистками отправилась в тяжёлый многолетний поход на низшие уровни Бездны в поисках некого артефакта – колокола. В процессе похода она влюбилась в одного из членов команды, забеременела и родила Рико. Однако из-за тяжёлых условий похода все члены команды погибли, а Лайза, пытаясь спасти свою дочь, оставила найденные артефакты в Бездне. Через 2 года после данных событий Лайза снова спустилась в Бездну навсегда.`,
        abilities: [
            "Легендарные навыки исследования",
            "Владение белым свистком",
            "Невероятная выживаемость в глубинах",
            "Знание древних механизмов Бездны"
        ],
        trivia: [
            "Известна как «Лайза-Уничтожительница»",
            "Родила Рико во время экспедиции в Бездне",
            "Оставила артефакты для спасения дочери",
            "Обучила Рега и отправила его на поверхность"
        ]
    },

    bondrewd: {
        name: "Бондрюд",
        japanese: "ボンドルド",
        seiyuu: "Тосиюки Морикава",
        whistle: "Белый Свисток",
        age: "Неизвестно (бессмертен)",
        status: "Учёный-экспериментатор",
        image: "img/characters/bondrewd-detail.png",
        bio: `«Белый» Свисток с дурной репутацией. Он в ответе за жестокие эксперименты над детьми ради изобретения устройства, позволяющего избавлять человека от эффекта Проклятья Бездны при подъёме. Его жертвами стали также Нанати и Митти. Бондрюд устроил свою базу на пятом уровне Бездны, в заброшенном храме, где вместе со своими слугами построил лабораторию, и куда попадают главные герои в процессе своего путешествия. Бондрюд обладает артефактом, позволяющем использовать чужие тела, как марионетки, переселяя в них свою душу – таким образом ему удаётся выживать снова и снова. Оригинальное тело Бондрюда было конвертировано в его собственный свисток, из-за чего он использует чужие тела и носит маску в качестве обозначения себя.`,
        abilities: [
            "Научные знания о проклятье Бездны",
            "Контроль над множеством тел",
            "Владение артефактом Зоахолик",
            "Организация исследований на 5-м уровне"
        ],
        trivia: [
            "Известен как «Вестник Рассвета»",
            "Его оригинальное тело превращено в свисток",
            "Проводил жестокие эксперименты над детьми",
            "Превратил Прушку в картридж и белый свисток"
        ]
    },

    jiruo: {
        name: "Дзируо",
        japanese: "ジルオ",
        seiyuu: "Таиси Маурата",
        whistle: "Лунный Свисток",
        age: "Взрослый",
        status: "Помощник директора приюта",
        image: "img/characters/jiruo-detail.png",
        bio: `Молодой помощник директора в приюте, ныне в ранге «Лунный» Свисток. В отличие от директора, он не такой строгий. В детстве, будучи ещё «Красным» Свистком, состоял в учениках Лайзы. Заботился о Рико, когда та стала сиротой.`,
        abilities: [
            "Опыт наставника для юных исследователей",
            "Знание системы свистков",
            "Административные навыки"
        ],
        trivia: [
            "Был учеником Лайзы в детстве",
            "Заботился о Рико после исчезновения Лайзы",
            "Имеет ранг Лунного Свистка",
            "Относится к Рико с отеческой заботой"
        ]
    },

    natt: {
        name: "Натт",
        japanese: "ナット",
        seiyuu: "Муцуми Тамура",
        whistle: "Красный Свисток",
        age: "12 лет",
        status: "Друг Рико",
        image: "img/characters/natt-detail.jfif",
        bio: `Один из друзей Рико, житель приюта. Питает чувства к девочке и был категорически против того, чтобы она отправилась в Бездну, боясь, что Рико никогда не вернётся на Поверхность.`,
        abilities: [
            "Дружба и поддержка товарищей",
            "Знание жизни в приюте"
        ],
        trivia: [
            "Тайно влюблён в Рико",
            "Сильно переживал за её безопасность",
            "Пытался отговорить её от спуска в Бездну",
            "Остался в приюте после отъезда Рико"
        ]
    },

    shiggy: {
        name: "Сиги",
        japanese: "シギー",
        seiyuu: "Манами Накамура",
        whistle: "Красный Свисток",
        age: "12 лет",
        status: "Друг Рико",
        image: "img/characters/shiggy-detail.jpg",
        bio: `Один из друзей Рико, житель приюта. Помогал ей изучить найденного робота Рега и знает о тайнах Рико, в том числе о том, что она решила сбежать из приюта.`,
        abilities: [
            "Техническая смекалка",
            "Умение хранить секреты",
            "Поддержка друзей"
        ],
        trivia: [
            "Помогал Рико изучать Рега",
            "Знал о её планах побега из приюта",
            "Хранил её секреты",
            "Поддерживал её стремления"
        ]
    },

    kiyui: {
        name: "Киюи",
        japanese: "キユイ",
        seiyuu: "Манами Ханава",
        whistle: "Пустая",
        age: "Младший",
        status: "Самый младший житель приюта",
        image: "img/characters/kiyui-detail.jpg",
        bio: `Самый младший житель приюта, малыш и друг Рико. Перед его днём рождения его поразила таинственная болезнь, и исходя из того, что некоторые дети в свой день рождения умирали, это должно было произойти и с Киюи. Однако когда мальчика увезли на лечение с острова, болезнь пропала, будто её не было. Тогда и укрепились предположения, что болезни являются частью Проклятья Бездны.`,
        abilities: [
            "Детская непосредственность",
            "Умение радоваться простым вещам"
        ],
        trivia: [
            "Самый младший обитатель приюта",
            "Чудом избежал смерти в день рождения",
            "Его болезнь исчезла при отъезде с острова",
            "Подтвердил теорию о связи болезней с Проклятьем Бездны"
        ]
    },

    faputa: {
        name: "Фапута",
        japanese: "ファプタ",
        seiyuu: "Мисаки Куно",
        whistle: "Красный Свисток",
        age: "Неизвестно",
        status: "Принцесса пустых/Одна из гланвых героев",
        image: "img/characters/faputa-detail.jfif",
        bio: "Последнее дитя Ирумьюй, рожденное из последней Колыбели желаний. Жители деревни Илблу на 6-м слое Бездны называли её «принцессой пустышек». Является воплощением ценности и несёт в себе весь гнев и сожаление Ирумьюй. Не может войти в деревню Илблу из-за поглощённых Колыбелей желаний. Обладает диким, неразумным поведением, говорит в третьем лице короткими предложениями. В настоящее время присоединилась к отряду Рико.",
        abilities: [
            "Сверхчеловеческая физическая сила и проворство",
            "Способность к трансформации и растяжению тела",
            "Бессмертие и регенерация",
            "Внутреннее уравновешивание (исцеление через оценку ценности)",
            "Телепатическая связь с существами и артефактами",
            "Производство клея из собственной мочи",
            "Невосприимчивость к проклятию Бездны"
        ],
        trivia: [
            "Имя означает «бессмертная принцесса» на языке Подземья",
            "Имеет четыре руки с красными когтями и пять хвостов",
            "Пахнет солнцем и печеным сладким картофелем",
            "Названа Габуруном, который стал её опекуном",
            "Может разговаривать на языке Подземья и языке Искателей",
            "Родилась с целью уничтожить деревню Илблу",
            "Получила очки от Рэга в знак дружбы"
        ]
    },
    majikaja: {
        name: "Маджикаджа",
        japanese: "マジカジャ",
        seiyuu: "Хироки Гото",
        whistle: "Пустой",
        age: "Неизвестно",
        status: "Второстепенный персонаж",
        image: "img/characters/majikaja-detail.png",
        bio: "Опустошенец, живущий в деревне Илблу на 6-м слое Бездны. Искусственное внешнее тело создано марионеточником Джезуном из различных предметов, полученных через торговлю. Истинная форма - газообразная, содержится в сшитом мешке внутри контейнера. Дружелюбный и услужливый, часто выступает в роли гида для новых посетителей деревни. Понимает и говорит на нескольких языках, хотя иногда забывает слова.",
        abilities: [
            "Смена тел-контейнеров (повседневное, скоростное, транспортное)",
            "Многоязычность - понимание и общение на разных языках",
            "Газообразная истинная форма",
            "Чувствительность к запахам и их анализ"
        ],
        trivia: [
            "Имеет три разных тела-контейнера для разных целей",
            "Истинная форма состоит из 'запахов' (газообразная)",
            "Часто называет Наначи 'хорошо пахнущей'",
            "Знает больше языков, чем используется в Орфе и Илблу",
            "Тело создано марионеточником Джезуном",
            "Иногда говорит о себе в третьем лице"
        ]
},
irumyuui: {
    name: "Ирумьюй",
    japanese: "イルミューイ",
    seiyuu: "Мисаки Куно",
    whistle: "Место жительства",
    age: "Неизвестно",
    status: "Мертва",
    image: "img/characters/irumyuui-detail.png",
    bio: "Родилась в племени, жившем на краю Бездны. Была изгнана в качестве жертвоприношения из-за бесплодия. Стала проводником Отряда Ганжа в Бездне. После слияния с Колыбелью желаний приобрела способность рождать существ и впоследствии превратилась в органическую структуру, став основой для создания деревни Илблу на 6-м слое Бездны.",
    abilities: [
        "Рождение существ после слияния с Колыбелью желаний",
        "Трансформация людей в Опустошенцев",
        "Создание органической структуры для деревни",
        "Исцеляющие свойства рожденных существ"
    ],
    trivia: [
        "Была изгнана из племени из-за бесплодия",
        "Носила ожерелье, подданное Вуэко",
        "Имела крысу-отшельника в качестве питомца",
        "Её дети обладали целительными свойствами",
        "Превратилась в основу деревни Илблу",
        "На спине имела знаки 'Дитя Бездны'"
    ]
},
habolg: {
    name: "Хаболг",
    japanese: "ハボルグ",
    seiyuu: "Тэцу Инада",
    whistle: "Чёрный Cвисток",
    age: "Взрослый",
    status: "Друг Рико",
    image: "img/characters/habolg-detail.jpg",
    bio: "Известный искатель и опытный носитель Чёрного свистка. Высокий крупный мужчина с грубыми чертами лица и бородой. Общительный и открытый человек, увлечённый тайнами Бездны и носителями белого свистка. Прямолинейный и честный, но хранит тайну происхождения Рико много лет. Любит детей и часто рассказывает им истории о белых свистках.",
    abilities: [
        "Неестественная скорость и физическая подготовка",
        "Высокие навыки выслеживания",
        "Глубокие знания о Бездне и белых свистках",
        "Лидерские качества и управление экспедициями",
        "Опыт носителя Чёрного свистка"
    ],
    trivia: [
        "Дети называют его 'дядя Хабо'",
        "Доставил белый свисток Лайзы на поверхность",
        "Помог Рико и Рэгу добраться до Стана искателей",
        "Руководитель Передового экспедиционного отряда",
        "Стремится стать носителем белого свистка",
        "Открыто восхищается Бондрюдом несмотря на его репутацию"
    ]
}

};

// Обработчики событий
document.addEventListener('DOMContentLoaded', function() {
    const characterCards = document.querySelectorAll('.character-card');
    const modal = document.getElementById('characterModal');
    const modalBody = document.getElementById('modalBody');
    const closeBtn = document.querySelector('.modal-close');
    
    // Открытие модального окна
    characterCards.forEach(card => {
        card.addEventListener('click', function() {
            const characterId = this.dataset.character;
            const characterData = charactersData[characterId];
            
            if (characterData) {
                showCharacterModal(characterData);
            }
        });
    });
    
    // Закрытие модального окна
    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', function(e) {
        if (e.target === modal) closeModal();
    });
    
    // Закрытие по ESC
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') closeModal();
    });
    
    function showCharacterModal(data) {
        modalBody.innerHTML = `
            <div class="character-detail">
                <div class="detail-avatar">
                    <img src="${data.image}" alt="${data.name}">
                    <div class="character-meta">
                        <span class="meta-item">${data.whistle}</span>
                        <span class="meta-item">${data.age}</span>
                    </div>
                </div>
                <div class="detail-info">
                    <h2>${data.name}</h2>
                    <div class="character-meta">
                        <span class="meta-item">${data.japanese}</span>
                        <span class="meta-item">сэйю: ${data.seiyuu}</span>
                        <span class="meta-item">${data.status}</span>
                    </div>
                    <div class="character-bio">
                        <p>${data.bio}</p>
                    </div>
                    ${data.abilities ? `
                    <div class="character-abilities">
                        <h4>Способности и особенности</h4>
                        <ul class="abilities-list">
                            ${data.abilities.map(ability => `<li>${ability}</li>`).join('')}
                        </ul>
                    </div>
                    ` : ''}
                    ${data.trivia ? `
                    <div class="character-trivia">
                        <h4>Интересные факты</h4>
                        <ul class="trivia-list">
                            ${data.trivia.map(trivia => `<li>${trivia}</li>`).join('')}
                        </ul>
                    </div>
                    ` : ''}
                </div>
            </div>
        `;
        
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
    
    function closeModal() {
        modal.classList.remove('active');
        document.body.style.overflow = 'auto';
    }
});